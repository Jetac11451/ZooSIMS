# ZooSIMS ‚Äî –°–∏–º—É–ª—è—Ç–æ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–æ–æ–ø–∞—Ä–∫–æ–º

## –ó–∞—á–µ–º?
–¶–µ–ª—å—é –ø—Ä–æ–µ–∫—Ç–∞ –±—ã–ª–æ –∑–∞–∫—Ä–µ–ø–∏—Ç—å –∑–Ω–∞–Ω–∏—è –ø–æ –û–û–ü (–æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é), –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏–∑ –æ–±—ä–µ–∫—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å STL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —É–∫–∞–∑–∞—Ç–µ–ª–∏, —Ä–∞–±–æ—Ç—É —Å –ø–∞–º—è—Ç—å—é –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —É–º–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.

## –ü–æ—á–µ–º—É?
–ü–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Ç–∞–∫ —Å–∫–∞–∑–∞–ª —Å–¥–µ–ª–∞—Ç—å 

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **C++17** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.
- **STL (Standard Template Library)** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å `vector`, `map`, `unordered_map`, `set`, `shared_ptr`, `unique_ptr`.
- **Windows API (—á–∞—Å—Ç–∏—á–Ω–æ)** ‚Äî –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —é–Ω–∏–∫–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ (`_setmode`).
- **Git + GitHub** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π –∏ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ ZooSIMS.cpp # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã

‚îú‚îÄ‚îÄ README.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª

‚îî‚îÄ‚îÄ .gitignore # –§–∞–π–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è Git

---

üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 
```bash
#include <iostream>
#include <io.h>
#include <fcntl.h>
#include <vector>
#include <string>
#include <cstdlib>
#include <ctime>
#include <locale.h>
#include <limits>
#include <cctype>
#include <map>
#include <algorithm>
#include <iomanip>
#include <memory>
#include <unordered_map>
#include <set>

using namespace std;

// –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤
class Zoo;
class Animal;
class Enclosure;
class Worker;

/**
 * @brief –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–¥–æ—Ä–æ–≤—å—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
 */
enum class AnimalHealth { HEALTHY, SICK, DEAD };

/**
 * @brief –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∂–∏–≤–æ—Ç–Ω—ã—Ö
 */
enum class AnimalType { LAND, AQUATIC, BIRD, REPTILE };

/**
 * @brief –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –≤–æ–ª—å–µ—Ä–æ–≤
 */
enum EnclosureType {
    ENCLOSURE_SMALL, ENCLOSURE_MEDIUM, ENCLOSURE_LARGE, ENCLOSURE_HUGE,
    ENCLOSURE_AQUARIUM, ENCLOSURE_BIRD_CAGE, ENCLOSURE_REPTILE_HOUSE, ENCLOSURE_PETTING_ZOO
};

/**
 * @brief –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ –∑–æ–æ–ø–∞—Ä–∫–∞
 */
enum WorkerType {
    WORKER_VET, WORKER_CLEANER, WORKER_FEEDER, WORKER_TRAINER, WORKER_GUIDE
};

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä—ã
const vector<wstring> healthStatus = { L"–ó–¥–æ—Ä–æ–≤", L"–ë–æ–ª–µ–Ω", L"–ú–µ—Ä—Ç–≤" };
const vector<wstring> animalTypes = { L"–ù–∞–∑–µ–º–Ω–æ–µ", L"–í–æ–¥–Ω–æ–µ", L"–ü—Ç–∏—Ü–∞", L"–†–µ–ø—Ç–∏–ª–∏—è" };
const vector<wstring> climates = { L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π", L"–£–º–µ—Ä–µ–Ω–Ω—ã–π", L"–ü–æ–ª—è—Ä–Ω—ã–π", L"–ü—É—Å—Ç—ã–Ω–Ω—ã–π", L"–í–æ–¥–Ω—ã–π" };
const vector<wstring> animalSpecies = {
    L"–õ–µ–≤", L"–¢–∏–≥—Ä", L"–ú–µ–¥–≤–µ–¥—å", L"–í–æ–ª–∫", L"–ü–∏–Ω–≥–≤–∏–Ω",
    L"–ö—Ä–æ–∫–æ–¥–∏–ª", L"–°–ª–æ–Ω", L"–ù–æ—Å–æ—Ä–æ–≥", L"–ñ–∏—Ä–∞—Ñ", L"–ó–µ–±—Ä–∞",
    L"–î–µ–ª—å—Ñ–∏–Ω", L"–ê–∫—É–ª–∞", L"–ß–µ—Ä–µ–ø–∞—Ö–∞", L"–û—Å—å–º–∏–Ω–æ–≥"
};

// –ö–∞—Ä—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –≤–∏–¥–æ–≤ –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
const map<wstring, vector<wstring>> speciesClimates = {
    {L"–õ–µ–≤", {L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π", L"–ü—É—Å—Ç—ã–Ω–Ω—ã–π"}},
    {L"–¢–∏–≥—Ä", {L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π", L"–£–º–µ—Ä–µ–Ω–Ω—ã–π"}},
    {L"–ú–µ–¥–≤–µ–¥—å", {L"–£–º–µ—Ä–µ–Ω–Ω—ã–π", L"–ü–æ–ª—è—Ä–Ω—ã–π"}},
    {L"–í–æ–ª–∫", {L"–£–º–µ—Ä–µ–Ω–Ω—ã–π", L"–ü–æ–ª—è—Ä–Ω—ã–π"}},
    {L"–ü–∏–Ω–≥–≤–∏–Ω", {L"–ü–æ–ª—è—Ä–Ω—ã–π"}},
    {L"–ö—Ä–æ–∫–æ–¥–∏–ª", {L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π"}},
    {L"–°–ª–æ–Ω", {L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π", L"–ü—É—Å—Ç—ã–Ω–Ω—ã–π"}},
    {L"–ù–æ—Å–æ—Ä–æ–≥", {L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π", L"–ü—É—Å—Ç—ã–Ω–Ω—ã–π"}},
    {L"–ñ–∏—Ä–∞—Ñ", {L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π", L"–ü—É—Å—Ç—ã–Ω–Ω—ã–π"}},
    {L"–ó–µ–±—Ä–∞", {L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π", L"–ü—É—Å—Ç—ã–Ω–Ω—ã–π"}},
    {L"–î–µ–ª—å—Ñ–∏–Ω", {L"–í–æ–¥–Ω—ã–π"}},
    {L"–ê–∫—É–ª–∞", {L"–í–æ–¥–Ω—ã–π"}},
    {L"–ß–µ—Ä–µ–ø–∞—Ö–∞", {L"–í–æ–¥–Ω—ã–π", L"–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π"}},
    {L"–û—Å—å–º–∏–Ω–æ–≥", {L"–í–æ–¥–Ω—ã–π"}}
};

const map<wstring, AnimalType> speciesTypes = {
    {L"–õ–µ–≤", AnimalType::LAND}, {L"–¢–∏–≥—Ä", AnimalType::LAND},
    {L"–ú–µ–¥–≤–µ–¥—å", AnimalType::LAND}, {L"–í–æ–ª–∫", AnimalType::LAND},
    {L"–ü–∏–Ω–≥–≤–∏–Ω", AnimalType::BIRD}, {L"–ö—Ä–æ–∫–æ–¥–∏–ª", AnimalType::REPTILE},
    {L"–°–ª–æ–Ω", AnimalType::LAND}, {L"–ù–æ—Å–æ—Ä–æ–≥", AnimalType::LAND},
    {L"–ñ–∏—Ä–∞—Ñ", AnimalType::LAND}, {L"–ó–µ–±—Ä–∞", AnimalType::LAND},
    {L"–î–µ–ª—å—Ñ–∏–Ω", AnimalType::AQUATIC}, {L"–ê–∫—É–ª–∞", AnimalType::AQUATIC},
    {L"–ß–µ—Ä–µ–ø–∞—Ö–∞", AnimalType::REPTILE}, {L"–û—Å—å–º–∏–Ω–æ–≥", AnimalType::AQUATIC}
};

const map<WorkerType, wstring> workerTypeNames = {
    {WORKER_VET, L"–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä"}, {WORKER_CLEANER, L"–£–±–æ—Ä—â–∏–∫"},
    {WORKER_FEEDER, L"–ö–æ—Ä–º–∏–ª—å—â–∏–∫"}, {WORKER_TRAINER, L"–î—Ä–µ—Å—Å–∏—Ä–æ–≤—â–∏–∫"},
    {WORKER_GUIDE, L"–≠–∫—Å–∫—É—Ä—Å–æ–≤–æ–¥"}
};

const map<WorkerType, int> workerBaseSalaries = {
    {WORKER_VET, 40000}, {WORKER_CLEANER, 20000},
    {WORKER_FEEDER, 25000}, {WORKER_TRAINER, 35000},
    {WORKER_GUIDE, 30000}
};

const map<wstring, int> speciesMaxAge = {
    {L"–õ–µ–≤", 15 + rand() % 10}, {L"–¢–∏–≥—Ä", 14 + rand() % 8},
    {L"–ú–µ–¥–≤–µ–¥—å", 20 + rand() % 15}, {L"–í–æ–ª–∫", 8 + rand() % 5},
    {L"–ü–∏–Ω–≥–≤–∏–Ω", 10 + rand() % 7}, {L"–ö—Ä–æ–∫–æ–¥–∏–ª", 30 + rand() % 20},
    {L"–°–ª–æ–Ω", 40 + rand() % 20}, {L"–ù–æ—Å–æ—Ä–æ–≥", 35 + rand() % 15},
    {L"–ñ–∏—Ä–∞—Ñ", 25 + rand() % 10}, {L"–ó–µ–±—Ä–∞", 20 + rand() % 10},
    {L"–î–µ–ª—å—Ñ–∏–Ω", 30 + rand() % 15}, {L"–ê–∫—É–ª–∞", 40 + rand() % 20},
    {L"–ß–µ—Ä–µ–ø–∞—Ö–∞", 50 + rand() % 30}, {L"–û—Å—å–º–∏–Ω–æ–≥", 5 + rand() % 3}
};

const map<int, tuple<EnclosureType, int, int, wstring>> enclosureTypes = {
    {1, {ENCLOSURE_SMALL, 5, 5000, L"–ú–∞–ª—ã–π"}},
    {2, {ENCLOSURE_MEDIUM, 10, 8000, L"–°—Ä–µ–¥–Ω–∏–π"}},
    {3, {ENCLOSURE_LARGE, 15, 12000, L"–ë–æ–ª—å—à–æ–π"}},
    {4, {ENCLOSURE_HUGE, 20, 15000, L"–û–≥—Ä–æ–º–Ω—ã–π"}},
    {5, {ENCLOSURE_AQUARIUM, 3, 10000, L"–ê–∫–≤–∞—Ä–∏—É–º"}},
    {6, {ENCLOSURE_BIRD_CAGE, 8, 7000, L"–ü—Ç–∏—á—å—è –∫–ª–µ—Ç–∫–∞"}},
    {7, {ENCLOSURE_REPTILE_HOUSE, 5, 9000, L"–¢–µ—Ä—Ä–∞—Ä–∏—É–º"}},
    {8, {ENCLOSURE_PETTING_ZOO, 10, 6000, L"–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –∑–æ–æ–ø–∞—Ä–∫"}}
};

/**
 * @brief –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–º—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ —Å —É—á–µ—Ç–æ–º –ø–æ–ª–∞
 * @param species –í–∏–¥ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
 * @param gender –ü–æ–ª –∂–∏–≤–æ—Ç–Ω–æ–≥–æ ('M' –∏–ª–∏ 'F')
 * @return –ò–º—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ —Å —É—á–µ—Ç–æ–º –ø–æ–ª–∞
 */
wstring generateAnimalName(const wstring& species, wchar_t gender) {
    if (gender == 'F') {
        if (species == L"–õ–µ–≤") return L"–õ—å–≤–∏—Ü–∞";
        if (species == L"–¢–∏–≥—Ä") return L"–¢–∏–≥—Ä–∏—Ü–∞";
        if (species == L"–ú–µ–¥–≤–µ–¥—å") return L"–ú–µ–¥–≤–µ–¥–∏—Ü–∞";
        if (species == L"–í–æ–ª–∫") return L"–í–æ–ª—á–∏—Ü–∞";
    }
    return species;
}

/**
 * @brief –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ —á–∏—Å–ª–æ–º
 * @param str –í—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
 * @return true, –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å–æ—Å—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ –∏–∑ —Ü–∏—Ñ—Ä, –∏–Ω–∞—á–µ false
 */
bool isNumber(const wstring& str) {
    return !str.empty() && all_of(str.begin(), str.end(), [](wchar_t ch) { return iswdigit(ch); });
}

/**
 * @brief –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –ø—É—Å—Ç–æ—Ç—É
 * @param prompt –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥–ª—è –≤–≤–æ–¥–∞
 * @return –í–≤–µ–¥–µ–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å—Ç—Ä–æ–∫–∞
 */
wstring safeInputString(const wstring& prompt) {
    wstring input;
    while (true) {
        wcout << prompt;
        getline(wcin, input);
        if (!input.empty()) return input;
        wcout << L"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–µ–ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É." << endl;
    }
}

/**
 * @brief –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–≤–æ–¥ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞
 * @param prompt –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥–ª—è –≤–≤–æ–¥–∞
 * @return –í–≤–µ–¥–µ–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–∏—Å–ª–æ
 */
int safeInputInt(const wstring& prompt) {
    wstring input;
    while (true) {
        wcout << prompt;
        getline(wcin, input);
        if (isNumber(input)) return stoi(input);
        wcout << L"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ: ";
    }
}

/**
 * @brief –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –∂–∏–≤–æ—Ç–Ω–æ–µ –≤ –∑–æ–æ–ø–∞—Ä–∫–µ
 */
class Animal {
public:
    int id;                     ///< –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
    wstring name;               ///< –ò–º—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
    wstring species;            ///< –í–∏–¥ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
    int age;                    ///< –í–æ–∑—Ä–∞—Å—Ç –≤ –¥–Ω—è—Ö
    int weight;                 ///< –í–µ—Å –≤ –∫–≥
    wstring climate;            ///< –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π –∫–ª–∏–º–∞—Ç
    bool isPredator;            ///< –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ö–∏—â–Ω–∏–∫–æ–º
    int price;                  ///< –¶–µ–Ω–∞ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
    time_t lastUpdateTime;      ///< –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
    wchar_t gender;             ///< –ü–æ–ª ('M' –∏–ª–∏ 'F')
    bool isAlive;               ///< –ñ–∏–≤–æ–µ –ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ
    int trueHappiness;          ///< –†–µ–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Å—á–∞—Å—Ç—å—è (0-100)
    int displayedHappiness;     ///< –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å —Å—á–∞—Å—Ç—å—è
    int maxAge;                 ///< –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –¥–ª—è —ç—Ç–æ–≥–æ –≤–∏–¥–∞
    int parentId1;              ///< ID –ø–µ—Ä–≤–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è (-1 –µ—Å–ª–∏ –Ω–µ—Ç)
    int parentId2;              ///< ID –≤—Ç–æ—Ä–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è (-1 –µ—Å–ª–∏ –Ω–µ—Ç)
    AnimalHealth health;        ///< –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è
    AnimalType type;            ///< –¢–∏–ø –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
    int daysSick;               ///< –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –±–æ–ª–µ–∑–Ω–∏
    bool hasDisease;            ///< –ï—Å—Ç—å –ª–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–µ

    /**
     * @brief –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @param _id –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
     * @param n –ò–º—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @param s –í–∏–¥ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @param a –í–æ–∑—Ä–∞—Å—Ç –≤ –¥–Ω—è—Ö
     * @param w –í–µ—Å –≤ –∫–≥
     * @param c –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π –∫–ª–∏–º–∞—Ç
     * @param pred –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ö–∏—â–Ω–∏–∫–æ–º
     * @param p –¶–µ–Ω–∞ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @param g –ü–æ–ª ('M' –∏–ª–∏ 'F')
     * @param maxA –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç (-1 –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞)
     * @param p1 ID –ø–µ—Ä–≤–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è
     * @param p2 ID –≤—Ç–æ—Ä–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è
     */
    Animal(int _id, wstring n, wstring s, int a, int w, wstring c, bool pred, int p, wchar_t g, int maxA = -1, int p1 = -1, int p2 = -1)
        : id(_id), name(move(n)), species(move(s)), age(a), weight(w), climate(move(c)), isPredator(pred), price(p),
        trueHappiness(70 + rand() % 31), displayedHappiness(trueHappiness), lastUpdateTime(time(0)),
        gender(g), isAlive(true), maxAge(maxA), parentId1(p1), parentId2(p2), health(AnimalHealth::HEALTHY),
        type(speciesTypes.at(species)), daysSick(0), hasDisease(false) {
        name = generateAnimalName(species, gender);
        if (maxAge == -1) {
            auto it = speciesMaxAge.find(species);
            maxAge = (it != speciesMaxAge.end()) ? it->second : (10 + rand() % 10);
        }
        if (age < 3) {
            trueHappiness = min(100, trueHappiness + 15);
            displayedHappiness = trueHappiness;
        }
    }

    /**
     * @brief –û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å —Å—á–∞—Å—Ç—å—è
     */
    void updateDisplayedHappiness() { displayedHappiness = trueHappiness; }

    /**
     * @brief –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–≤–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è —Å—á–∞—Å—Ç—å—è
     * @return ANSI-–∫–æ–¥ —Ü–≤–µ—Ç–∞
     */
    wstring getHappinessColor() const {
        if (!isAlive) return L"\033[90m";
        if (displayedHappiness >= 80) return L"\033[32m";
        if (displayedHappiness >= 60) return L"\033[33m";
        if (displayedHappiness >= 40) return L"\033[93m";
        if (displayedHappiness >= 20) return L"\033[31m";
        return L"\033[91m";
    }

    /**
     * @brief –û–±–Ω–æ–≤–ª—è–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Å—á–∞—Å—Ç—å—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @param isFed –ë—ã–ª–æ –ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ –Ω–∞–∫–æ—Ä–º–ª–µ–Ω–æ
     * @param isAlone –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ –æ–¥–Ω–æ –≤ –≤–æ–ª—å–µ—Ä–µ
     * @param isClean –ß–∏—Å—Ç—ã–π –ª–∏ –≤–æ–ª—å–µ—Ä
     */
    void updateHappiness(bool isFed, bool isAlone, bool isClean) {
        if (!isAlive) return;
        int oldHappiness = trueHappiness;
        int change = 0;
        if (!isFed) change -= 25;
        if (!isClean) change -= 20;
        if (isAlone) change -= (isPredator ? 10 : 20);
        if (hasDisease) change -= 15;
        trueHappiness = max(0, min(100, trueHappiness + change));
        displayedHappiness = trueHappiness;
        if (oldHappiness != trueHappiness) {
            wstring message = name + L" (ID:" + to_wstring(id) + L") ";
            if (!isFed) message += L"–≥–æ–ª–æ–¥–∞–µ—Ç! ";
            if (!isClean) message += L"–≤ –≥—Ä—è–∑–Ω–æ–º –≤–æ–ª—å–µ—Ä–µ! ";
            if (isAlone) message += L"–æ–¥–∏–Ω–æ–∫! ";
            if (hasDisease) message += L"–±–æ–ª–µ–Ω! ";
            message += L"–°—á–∞—Å—Ç—å–µ: " + to_wstring(oldHappiness) + L"% -> " + to_wstring(trueHappiness) + L"%";
            wcout << message << endl;
        }
    }

    /**
     * @brief –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–±–µ–≥–∞ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å—á–∞—Å—Ç—å—è
     * @return true, –µ—Å–ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ —Å–±–µ–∂–∞–ª–æ, –∏–Ω–∞—á–µ false
     */
    bool tryEscape() {
        if (!isAlive) return false;
        if (trueHappiness <= 15) {
            int escapeChance = 25 - trueHappiness;
            if (rand() % 100 < escapeChance) {
                wcout << L"!!! " << name << L" (ID:" << id << L") —Å–±–µ–∂–∞–ª –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å—á–∞—Å—Ç—å—è (" << trueHappiness << L"%)!" << endl;
                isAlive = false;
                return true;
            }
        }
        return false;
    }

    /**
     * @brief –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ —É–º–µ—Ä–ª–æ –ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏
     * @return true, –µ—Å–ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ —É–º–µ—Ä–ª–æ, –∏–Ω–∞—á–µ false
     */
    bool checkAge() {
        if (age > maxAge) {
            int deathChance = min(100, age - maxAge);
            if (rand() % 100 < deathChance) {
                wcout << name << L" (ID:" << id << L") —É–º–µ—Ä –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏ –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ " << age << L" –¥–Ω–µ–π." << endl;
                isAlive = false;
                return true;
            }
        }
        return false;
    }

    /**
     * @brief –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç –∂–∏–≤–æ—Ç–Ω–æ–µ
     * @param newName –ù–æ–≤–æ–µ –∏–º—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     */
    void rename(const wstring& newName) {
        name = newName;
        wcout << L"–ñ–∏–≤–æ—Ç–Ω–æ–µ ID:" << id << L" —Ç–µ–ø–µ—Ä—å –∑–æ–≤—É—Ç " << name << endl;
    }

    /**
     * @brief –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è
     * @return true, –µ—Å–ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ –º–æ–∂–µ—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è, –∏–Ω–∞—á–µ false
     */
    bool canReproduce() const {
        return isAlive && age > 5 && age < maxAge - 2 && health == AnimalHealth::HEALTHY;
    }

    /**
     * @brief –û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∂–∏–≤–æ—Ç–Ω—ã—Ö –ø–æ ID
     */
    bool operator==(const Animal& other) const { return id == other.id; }

    /**
     * @brief –û–ø–µ—Ä–∞—Ç–æ—Ä —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è –∂–∏–≤–æ—Ç–Ω—ã—Ö
     * @param other –î—Ä—É–≥–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –¥–ª—è —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è
     * @return –í–µ–∫—Ç–æ—Ä –ø–æ—Ç–æ–º–∫–æ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)
     */
    vector<unique_ptr<Animal>> operator+(Animal& other) {
        vector<unique_ptr<Animal>> offspring;

        if (!this->canReproduce() || !other.canReproduce()) {
            wcout << L"–û–¥–Ω–æ –∏–∑ –∂–∏–≤–æ—Ç–Ω—ã—Ö –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è (—Å–ª–∏—à–∫–æ–º –º–æ–ª–æ–¥–æ–µ/—Å—Ç–∞—Ä–æ–µ, –º–µ—Ä—Ç–≤–æ–µ –∏–ª–∏ –±–æ–ª—å–Ω–æ–µ)!" << endl;
            return offspring;
        }

        if (this->gender == other.gender) {
            wcout << L"–û–¥–Ω–æ–ø–æ–ª—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –Ω–µ –º–æ–≥—É—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è!" << endl;
            return offspring;
        }

        Animal* father = (this->gender == 'M') ? this : &other;
        Animal* mother = (this->gender == 'F') ? this : &other;

        int offspringCount = 1;
        int chance = rand() % 100;

        if (species == L"–ù–æ—Å–æ—Ä–æ–≥" || species == L"–°–ª–æ–Ω" || species == L"–ñ–∏—Ä–∞—Ñ") {
            offspringCount = 1;
        }
        else if (species == L"–õ–µ–≤" || species == L"–¢–∏–≥—Ä") {
            if (chance < 40) offspringCount = 1;
            else if (chance < 80) offspringCount = 2;
            else offspringCount = 3;
        }
        else {
            if (chance < 60) offspringCount = 1;
            else if (chance < 90) offspringCount = 2;
            else offspringCount = 3;
        }

        for (int i = 0; i < offspringCount; i++) {
            wstring babyName = L"–î–µ—Ç–µ–Ω—ã—à " + species;

            if (species == L"–ù–æ—Å–æ—Ä–æ–≥") babyName = L"–ù–æ—Å–æ—Ä–æ–∂–æ–∫";
            else if (species == L"–°–ª–æ–Ω") babyName = L"–°–ª–æ–Ω—ë–Ω–æ–∫";
            else if (species == L"–ñ–∏—Ä–∞—Ñ") babyName = L"–ñ–∏—Ä–∞—Ñ—ë–Ω–æ–∫";
            else if (species == L"–õ–µ–≤") babyName = L"–õ—å–≤—ë–Ω–æ–∫";
            else if (species == L"–¢–∏–≥—Ä") babyName = L"–¢–∏–≥—Ä—ë–Ω–æ–∫";
            else if (species == L"–î–µ–ª—å—Ñ–∏–Ω") babyName = L"–î–µ–ª—å—Ñ–∏–Ω—ë–Ω–æ–∫";
            else if (species == L"–ê–∫—É–ª–∞") babyName = L"–ê–∫—É–ª—ë–Ω–æ–∫";

            int babyWeight = (father->weight + mother->weight) / (10 + rand() % 5);
            int babyPrice = (father->price + mother->price) / (4 + rand() % 3);
            wchar_t babyGender = (rand() % 2) ? 'M' : 'F';

            offspring.push_back(make_unique<Animal>(
                0, babyName, species, 0, babyWeight, mother->climate,
                mother->isPredator, babyPrice, babyGender, -1, father->id, mother->id
            ));
        }

        wcout << L"–†–æ–¥–∏–ª–æ—Å—å " << offspringCount << L" "
            << (offspringCount == 1 ? L"–¥–µ—Ç—ë–Ω—ã—à" : L"–¥–µ—Ç—ë–Ω—ã—à–µ–π") << L" " << species << L"!" << endl;
        return offspring;
    }

    /**
     * @brief –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     */
    void checkDisease() {
        if (!isAlive || health == AnimalHealth::DEAD) return;

        if (health == AnimalHealth::HEALTHY) {
            if (rand() % 100 < 5) {
                health = AnimalHealth::SICK;
                hasDisease = true;
                daysSick = 1;
                wcout << name << L" (ID:" << id << L") –∑–∞–±–æ–ª–µ–ª!" << endl;
            }
        }
        else if (health == AnimalHealth::SICK) {
            daysSick++;
            if (daysSick > 5 && rand() % 100 < 30) {
                health = AnimalHealth::DEAD;
                isAlive = false;
                wcout << name << L" (ID:" << id << L") —É–º–µ—Ä –æ—Ç –±–æ–ª–µ–∑–Ω–∏!" << endl;
            }
            else if (daysSick > 3 && rand() % 100 < 20) {
                health = AnimalHealth::HEALTHY;
                hasDisease = false;
                wcout << name << L" (ID:" << id << L") –≤—ã–∑–¥–æ—Ä–æ–≤–µ–ª!" << endl;
            }
        }
    }

    // –ì–µ—Ç—Ç–µ—Ä—ã
    int getDisplayedHappiness() const { return displayedHappiness; }
    int getTrueHappiness() const { return trueHappiness; }
    wchar_t getGender() const { return gender; }
    int getParentId1() const { return parentId1; }
    int getParentId2() const { return parentId2; }
    bool getIsAlive() const { return isAlive; }
    wstring getSpecies() const { return species; }
    AnimalHealth getHealth() const { return health; }
    AnimalType getType() const { return type; }
};

/**
 * @brief –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –≤–æ–ª—å–µ—Ä –≤ –∑–æ–æ–ø–∞—Ä–∫–µ
 */
class Enclosure {
public:
    int id;                     ///< –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–æ–ª—å–µ—Ä–∞
    int capacity;               ///< –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–æ–ª—å–µ—Ä–∞
    EnclosureType type;         ///< –¢–∏–ø –≤–æ–ª—å–µ—Ä–∞
    wstring climate;            ///< –ö–ª–∏–º–∞—Ç –≤–æ–ª—å–µ—Ä–∞
    int maintenanceCost;        ///< –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
    bool isClean;               ///< –ß–∏—Å—Ç—ã–π –ª–∏ –≤–æ–ª—å–µ—Ä
    vector<Animal*> containedAnimals; ///< –ñ–∏–≤–æ—Ç–Ω—ã–µ –≤ –≤–æ–ª—å–µ—Ä–µ

    /**
     * @brief –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–æ–ª—å–µ—Ä–∞
     * @param _id –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
     * @param c –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
     * @param t –¢–∏–ø –≤–æ–ª—å–µ—Ä–∞
     * @param cl –ö–ª–∏–º–∞—Ç
     * @param cost –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
     */
    Enclosure(int _id, int c, EnclosureType t, wstring cl, int cost)
        : id(_id), capacity(c), type(t), climate(move(cl)), maintenanceCost(cost), isClean(true) {
    }

    /**
     * @brief –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ–ª—å–µ—Ä–∞
     * @return –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞
     */
    wstring getTypeName() const {
        static const map<EnclosureType, wstring> typeNames = {
            {ENCLOSURE_SMALL, L"–ú–∞–ª—ã–π"}, {ENCLOSURE_MEDIUM, L"–°—Ä–µ–¥–Ω–∏–π"},
            {ENCLOSURE_LARGE, L"–ë–æ–ª—å—à–æ–π"}, {ENCLOSURE_HUGE, L"–û–≥—Ä–æ–º–Ω—ã–π"},
            {ENCLOSURE_AQUARIUM, L"–ê–∫–≤–∞—Ä–∏—É–º"}, {ENCLOSURE_BIRD_CAGE, L"–ü—Ç–∏—á—å—è –∫–ª–µ—Ç–∫–∞"},
            {ENCLOSURE_REPTILE_HOUSE, L"–¢–µ—Ä—Ä–∞—Ä–∏—É–º"}, {ENCLOSURE_PETTING_ZOO, L"–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –∑–æ–æ–ø–∞—Ä–∫"}
        };
        return typeNames.at(type);
    }

    /**
     * @brief –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ —Ç–∏–ø –≤–æ–ª—å–µ—Ä–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @param animalType –¢–∏–ø –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @return true, –µ—Å–ª–∏ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∏–Ω–∞—á–µ false
     */
    bool isSuitableForAnimalType(AnimalType animalType) const {
        switch (type) {
        case ENCLOSURE_AQUARIUM: return animalType == AnimalType::AQUATIC;
        case ENCLOSURE_BIRD_CAGE: return animalType == AnimalType::BIRD;
        case ENCLOSURE_REPTILE_HOUSE: return animalType == AnimalType::REPTILE;
        default: return animalType == AnimalType::LAND;
        }
    }

    /**
     * @brief –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–∏—Å—Ç–æ—Ç—ã –≤–æ–ª—å–µ—Ä–∞
     */
    void updateCleanliness() {
        if (!containedAnimals.empty() && rand() % 3 == 0) {
            isClean = false;
            wcout << L"–í–æ–ª—å–µ—Ä ID:" << id << L" (" << getTypeName() << L") —Å—Ç–∞–ª –≥—Ä—è–∑–Ω—ã–º." << endl;
        }
    }

    /**
     * @brief –î–æ–±–∞–≤–ª—è–µ—Ç –∂–∏–≤–æ—Ç–Ω–æ–µ –≤ –≤–æ–ª—å–µ—Ä
     * @param animal –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∂–∏–≤–æ—Ç–Ω–æ–µ
     * @return true, –µ—Å–ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ, –∏–Ω–∞—á–µ false
     */
    bool addAnimal(Animal* animal) {
        if (containedAnimals.size() >= static_cast<size_t>(capacity)) {
            wcout << L"–í–æ–ª—å–µ—Ä –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω!" << endl;
            return false;
        }
        if (animal->climate != climate) {
            wcout << L"–ö–ª–∏–º–∞—Ç –≤–æ–ª—å–µ—Ä–∞ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç—Ç–æ–≥–æ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ!" << endl;
            return false;
        }
        if (!isSuitableForAnimalType(animal->getType())) {
            wcout << L"–¢–∏–ø –≤–æ–ª—å–µ—Ä–∞ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç—Ç–æ–≥–æ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ!" << endl;
            return false;
        }
        containedAnimals.push_back(animal);
        wcout << animal->name << L" (ID:" << animal->id << L") –ø–æ–º–µ—â–µ–Ω –≤ –≤–æ–ª—å–µ—Ä ID:" << id << endl;
        return true;
    }

    /**
     * @brief –£–¥–∞–ª—è–µ—Ç –∂–∏–≤–æ—Ç–Ω–æ–µ –∏–∑ –≤–æ–ª—å–µ—Ä–∞
     * @param animalId ID –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @return true, –µ—Å–ª–∏ –∂–∏–≤–æ—Ç–Ω–æ–µ –Ω–∞–π–¥–µ–Ω–æ –∏ —É–¥–∞–ª–µ–Ω–æ, –∏–Ω–∞—á–µ false
     */
    bool removeAnimal(int animalId) {
        for (auto it = containedAnimals.begin(); it != containedAnimals.end(); ++it) {
            if ((*it)->id == animalId) {
                containedAnimals.erase(it);
                return true;
            }
        }
        return false;
    }

    /**
     * @brief –û—á–∏—â–∞–µ—Ç –≤–æ–ª—å–µ—Ä
     */
    void clean() {
        isClean = true;
        wcout << L"–í–æ–ª—å–µ—Ä ID:" << id << L" (" << getTypeName() << L") –±—ã–ª –ø–æ—á–∏—â–µ–Ω." << endl;
    }

    /**
     * @brief –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∂–∏–≤–æ—Ç–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª–∞
     * @param gender –ü–æ–ª ('M' –∏–ª–∏ 'F')
     * @return –í–µ–∫—Ç–æ—Ä —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö
     */
    vector<Animal*> getAnimalsByGender(wchar_t gender) {
        vector<Animal*> result;
        for (auto& animal : containedAnimals) {
            if (animal->getGender() == gender && animal->getIsAlive()) {
                result.push_back(animal);
            }
        }
        return result;
    }

    /**
     * @brief –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç –±–æ–ª–µ–∑–Ω—å —Å—Ä–µ–¥–∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö –≤ –≤–æ–ª—å–µ—Ä–µ
     */
    void spreadDisease() {
        if (containedAnimals.empty()) return;

        bool hasSickAnimal = false;
        for (auto animal : containedAnimals) {
            if (animal->getHealth() == AnimalHealth::SICK) {
                hasSickAnimal = true;
                break;
            }
        }

        if (hasSickAnimal) {
            for (auto animal : containedAnimals) {
                if (animal->getHealth() == AnimalHealth::HEALTHY && rand() % 100 < 20) {
                    animal->checkDisease();
                }
            }
        }
    }
};

/**
 * @brief –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ –∑–æ–æ–ø–∞—Ä–∫–∞
 */
class Worker {
public:
    int id;             ///< –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
    wstring name;       ///< –ò–º—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
    WorkerType type;    ///< –¢–∏–ø —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
    int salary;         ///< –ó–∞—Ä–ø–ª–∞—Ç–∞
    int capacity;       ///< –ï–º–∫–æ—Å—Ç—å (—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞ –¥–µ–Ω—å)

    /**
     * @brief –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
     * @param _id –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
     * @param n –ò–º—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
     * @param t –¢–∏–ø —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
     */
    Worker(int _id, wstring n, WorkerType t)
        : id(_id), name(move(n)), type(t), salary(workerBaseSalaries.at(t)), capacity(0) {
        static const map<WorkerType, int> workerCapacities = {
            {WORKER_VET, 20}, {WORKER_CLEANER, 3},
            {WORKER_FEEDER, 2}, {WORKER_TRAINER, 5},
            {WORKER_GUIDE, 0}
        };
        capacity = workerCapacities.at(type);
        if (type == WORKER_GUIDE) salary += 5000;
    }

    /**
     * @brief –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
     * @return –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞
     */
    wstring getTypeName() const { return workerTypeNames.at(type); }

    /**
     * @brief –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
     * @param zoo –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∑–æ–æ–ø–∞—Ä–∫
     */
    void performDuties(Zoo* zoo);

    /**
     * @brief –û—á–∏—â–∞–µ—Ç –≤–æ–ª—å–µ—Ä—ã
     * @param enclosures –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–µ–∫—Ç–æ—Ä –≤–æ–ª—å–µ—Ä–æ–≤
     */
    void cleanEnclosures(vector<unique_ptr<Enclosure>>& enclosures) {
        int cleaned = 0;
        for (auto& enclosure : enclosures) {
            if (cleaned >= capacity) break;
            if (!enclosure->isClean) {
                enclosure->clean();
                cleaned++;
            }
        }
        if (cleaned > 0) {
            wcout << name << L" –ø–æ—á–∏—Å—Ç–∏–ª " << cleaned << L" –≤–æ–ª—å–µ—Ä–æ–≤." << endl;
        }
    }

    /**
     * @brief –õ–µ—á–∏—Ç –∂–∏–≤–æ—Ç–Ω—ã—Ö
     * @param animals –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–µ–∫—Ç–æ—Ä –∂–∏–≤–æ—Ç–Ω—ã—Ö
     */
    void treatAnimals(vector<unique_ptr<Animal>>& animals) {
        int treated = 0;
        for (auto& animal : animals) {
            if (treated >= capacity) break;
            if (animal->getHealth() == AnimalHealth::SICK) {
                animal->checkDisease();
                treated++;
            }
        }
        if (treated > 0) {
            wcout << name << L" –≤—ã–ª–µ—á–∏–ª " << treated << L" –∂–∏–≤–æ—Ç–Ω—ã—Ö." << endl;
        }
    }
};

/**
 * @brief –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –∑–æ–æ–ø–∞—Ä–∫
 */
class Zoo {
private:
    bool testMode;                      ///< –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    vector<unique_ptr<Animal>> marketAnimals; ///< –ñ–∏–≤–æ—Ç–Ω—ã–µ –Ω–∞ —Ä—ã–Ω–∫–µ
    int marketRefreshCost;              ///< –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä—ã–Ω–∫–∞
    time_t lastMarketRefresh;           ///< –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä—ã–Ω–∫–∞
    int animalsBoughtToday;             ///< –°–∫–æ–ª—å–∫–æ –∂–∏–≤–æ—Ç–Ω—ã—Ö –∫—É–ø–ª–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è
    unordered_map<int, Animal*> animalsMap; ///< –ö–∞—Ä—Ç–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    unordered_map<int, Enclosure*> enclosuresMap; ///< –ö–∞—Ä—Ç–∞ –≤–æ–ª—å–µ—Ä–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    unordered_map<int, Worker*> workersMap; ///< –ö–∞—Ä—Ç–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

    /**
     * @brief –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–∞—Ä—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
     */
    void updateMaps() {
        animalsMap.clear();
        for (auto& animal : animals) {
            animalsMap[animal->id] = animal.get();
        }
        enclosuresMap.clear();
        for (auto& enclosure : enclosures) {
            enclosuresMap[enclosure->id] = enclosure.get();
        }
        workersMap.clear();
        for (auto& worker : workers) {
            workersMap[worker->id] = worker.get();
        }
    }

public:
    wstring name;               ///< –ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–æ–ø–∞—Ä–∫–∞
    int money;                  ///< –î–µ–Ω—å–≥–∏ –∑–æ–æ–ø–∞—Ä–∫–∞
    int food;                   ///< –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥—ã
    int popularity;             ///< –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –∑–æ–æ–ø–∞—Ä–∫–∞
    vector<unique_ptr<Animal>> animals; ///< –ñ–∏–≤–æ—Ç–Ω—ã–µ –≤ –∑–æ–æ–ø–∞—Ä–∫–µ
    vector<unique_ptr<Enclosure>> enclosures; ///< –í–æ–ª—å–µ—Ä—ã –≤ –∑–æ–æ–ø–∞—Ä–∫–µ
    vector<unique_ptr<Worker>> workers; ///< –†–∞–±–æ—Ç–Ω–∏–∫–∏ –∑–æ–æ–ø–∞—Ä–∫–∞
    int visitors;               ///< –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
    int days;                   ///< –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—à–µ–¥—à–∏—Ö –¥–Ω–µ–π
    int victoryDays;            ///< –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –ø–æ–±–µ–¥—ã
    int nextAnimalId;           ///< –°–ª–µ–¥—É—é—â–∏–π ID –¥–ª—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
    int nextEnclosureId;        ///< –°–ª–µ–¥—É—é—â–∏–π ID –¥–ª—è –≤–æ–ª—å–µ—Ä–∞
    int nextWorkerId;           ///< –°–ª–µ–¥—É—é—â–∏–π ID –¥–ª—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
    wstring directorName;       ///< –ò–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞

    /**
     * @brief –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–æ–æ–ø–∞—Ä–∫–∞
     * @param zooName –ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–æ–ø–∞—Ä–∫–∞
     * @param victoryDaysCount –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –ø–æ–±–µ–¥—ã
     */
    Zoo(wstring zooName, int victoryDaysCount)
        : name(move(zooName)), money(500000), food(100), popularity(10), visitors(20),
        days(0), victoryDays(victoryDaysCount), nextAnimalId(1), nextEnclosureId(1),
        nextWorkerId(1), testMode(false), marketRefreshCost(5000), animalsBoughtToday(0) {
        (void)_setmode(_fileno(stdout), _O_U16TEXT);
        (void)_setmode(_fileno(stdin), _O_U16TEXT);
        setlocale(LC_ALL, "ru_RU.UTF-8");

        directorName = safeInputString(L"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ –∑–æ–æ–ø–∞—Ä–∫–∞: ");
        refreshMarket();
    }

    /**
     * @brief –ù–∞—Ö–æ–¥–∏—Ç –∂–∏–≤–æ—Ç–Ω–æ–µ –ø–æ ID
     * @param id ID –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
     * @return –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∂–∏–≤–æ—Ç–Ω–æ–µ –∏–ª–∏ nullptr, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
     */
    Animal* findAnimal(int id) {
        auto it = animalsMap.find(id);
        return it != animalsMap.end() ? it->second : nullptr;
    }

    /**
     * @brief –ù–∞—Ö–æ–¥–∏—Ç –≤–æ–ª—å–µ—Ä –ø–æ ID
     * @param id ID –≤–æ–ª—å–µ—Ä–∞
     * @return –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –≤–æ–ª—å–µ—Ä –∏–ª–∏ nullptr, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
     */
    Enclosure* findEnclosure(int id) {
        auto it = enclosuresMap.find(id);
        return it != enclosuresMap.end() ? it->second : nullptr;
    }

    /**
     * @brief –ù–∞—Ö–æ–¥–∏—Ç —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ –ø–æ ID
     * @param id ID —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
     * @return –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ –∏–ª–∏ nullptr, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
     */
    Worker* findWorker(int id) {
        auto it = workersMap.find(id);
        return it != workersMap.end() ? it->second : nullptr;
   



```

---

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ö—É–ø–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞

–ù–∞–Ω—è—Ç—å –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∞ –∏ —É–±–æ—Ä—â–∏–∫–∞

–ü–æ–∫–æ—Ä–º–∏—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö

–ü–æ–≤—ã—Å–∏—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Ä–µ–∫–ª–∞–º—É

–†–∞–∑–≤–æ–¥–∏—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –≤–æ–ª—å–µ—Ä–µ

–ü—Ä–æ–π—Ç–∏ 100 –¥–Ω–µ–π —É—Å–ø–µ—à–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–æ–æ–ø–∞—Ä–∫–æ–º\

---

**–¶–µ–ª—å –∏–≥—Ä—ã**

–£—Å–ø–µ—à–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–æ–æ–ø–∞—Ä–∫–æ–º –Ω–µ –º–µ–Ω–µ–µ 100 –¥–Ω–µ–π , —Å–æ—Ö—Ä–∞–Ω—è—è –±–∞–ª–∞–Ω—Å –¥–µ–Ω–µ–≥, –µ–¥—ã, –∑–¥–æ—Ä–æ–≤—å—è –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏.

---


## üß™ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç?

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Windows (–∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `_setmode`)
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä C++17 (MSVC / g++ / clang++)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode –≤ –∫–æ–Ω—Å–æ–ª–∏

### –°–±–æ—Ä–∫–∞:
```bash
g++ -std=c++17 -o ZooSIMS main.cpp
